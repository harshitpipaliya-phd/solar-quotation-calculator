<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Advanced Solar Panel Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .calculator {
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }

    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-bottom: 15px;
    }

    button {
      font-size: 16px;
      cursor: pointer;
    }

    #calculateBtn {
      background-color: #007bff;
      color: white;
      border: none;
    }

    #whatsappBtn {
      background-color: #25D366;
      color: white;
      border: none;
      display: none;
    }

    .results {
      background: #eef;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>Solar Panel Calculator</h1>
  <div class="calculator">

    <label for="city">City:</label>
    <select id="city">
      <option>Surat</option>
      <option>Bardoli</option>
      <option>Bharuch</option>
      <option>Ankleshwar</option>
    </select>

    <label for="category">Category:</label>
    <select id="category">
      <option>Residential</option>
      <option>Industrial</option>
      <option>Commercial</option>
      <option>Social Sector</option>
    </select>

    <label for="bill">Average Monthly Bill (â‚¹):</label>
    <input type="number" id="bill" placeholder="e.g. 2500">

    <label for="rate">Electricity Rate (â‚¹/kWh):</label>
    <input type="number" id="rate" placeholder="e.g. 7">

    <label for="area">Available Rooftop Area (sqft):</label>
    <input type="number" id="area" placeholder="e.g. 300">

   

    <div id="results" class="results" style="display:none;">
      <h3>Calculation Results</h3>
      <p><strong>Monthly Usage:</strong> <span id="monthlyKwh"></span> kWh</p>
      <p><strong>Panels Needed:</strong> <span id="panelCount"></span></p>
      <p><strong>System Size:</strong> <span id="systemKw"></span> kW</p>
      <p><strong>Area Required:</strong> <span id="areaNeeded"></span> sqft</p>
      <p><strong>Total Cost:</strong> â‚¹<span id="rawCost"></span></p>
      <p><strong>Subsidy (Residential only):</strong> â‚¹<span id="subsidy"></span></p>
      <p><strong>Final Cost After Subsidy:</strong> â‚¹<span id="finalCost"></span></p>
      <p><strong>Estimated Monthly Solar Bill:</strong> â‚¹<span id="solarBill"></span></p>
    </div>
    
 <button id="calculateBtn" onclick="calculateSolar()">Calculate</button>
    <button id="whatsappBtn" onclick="sendWhatsApp()">Send on WhatsApp</button>

  </div>

  <script>
    function calculateSolar() {
      const city = document.getElementById("city").value;
      const category = document.getElementById("category").value;
      const bill = parseFloat(document.getElementById("bill").value);
      const rate = parseFloat(document.getElementById("rate").value);
      const area = parseFloat(document.getElementById("area").value);

      if (isNaN(bill) || isNaN(rate) || isNaN(area)) {
        alert("Please enter valid numeric inputs.");
        return;
      }

      const monthlyKwh = bill / rate;
      const avgSunHours = 5.5;
      const systemKw = (monthlyKwh / 30) / avgSunHours;
      const panelsNeeded = Math.ceil((systemKw * 1000) / 330);
      const areaNeeded = panelsNeeded * 18;
      const rawCost = panelsNeeded * 1000;

      let subsidy = 0;
      if (category === "Residential") {
        subsidy = Math.floor(systemKw) * 30000;
      }

      const finalCost = rawCost - subsidy;
      const solarGeneration = systemKw * avgSunHours * 30;
      const solarBill = Math.max((monthlyKwh - solarGeneration) * rate, 0);

      document.getElementById("monthlyKwh").textContent = monthlyKwh.toFixed(2);
      document.getElementById("panelCount").textContent = panelsNeeded;
      document.getElementById("systemKw").textContent = systemKw.toFixed(2);
      document.getElementById("areaNeeded").textContent = areaNeeded.toFixed(0);
      document.getElementById("rawCost").textContent = rawCost.toLocaleString();
      document.getElementById("subsidy").textContent = subsidy.toLocaleString();
      document.getElementById("finalCost").textContent = finalCost.toLocaleString();
      document.getElementById("solarBill").textContent = solarBill.toFixed(0);

      document.getElementById("results").style.display = "block";
      document.getElementById("whatsappBtn").style.display = "block";
    }

    function sendWhatsApp() {
      const phone = "9157767140"; // Replace with your WhatsApp number

      const city = document.getElementById("city").value;
      const category = document.getElementById("category").value;
      const bill = document.getElementById("bill").value;
      const rate = document.getElementById("rate").value;
      const area = document.getElementById("area").value;

      const monthlyKwh = document.getElementById("monthlyKwh").textContent;
      const panelCount = document.getElementById("panelCount").textContent;
      const systemKw = document.getElementById("systemKw").textContent;
      const areaNeeded = document.getElementById("areaNeeded").textContent;
      const rawCost = document.getElementById("rawCost").textContent;
      const subsidy = document.getElementById("subsidy").textContent;
      const finalCost = document.getElementById("finalCost").textContent;
      const solarBill = document.getElementById("solarBill").textContent;

      const message = `ðŸŒž *Solar Panel Quote Request* ðŸŒž
City: ${city}
Category: ${category}
Rooftop Area: ${area} sqft
Monthly Bill: â‚¹${bill}
Electricity Rate: â‚¹${rate}/kWh

ðŸ“Š *Results:*
â€¢ Monthly Usage: ${monthlyKwh} kWh
â€¢ Panels Needed: ${panelCount}
â€¢ System Size: ${systemKw} kW
â€¢ Area Required: ${areaNeeded} sqft
â€¢ Total System Cost: â‚¹${rawCost}
â€¢ Subsidy: â‚¹${subsidy}
â€¢ Final Cost: â‚¹${finalCost}
â€¢ Estimated Solar Bill: â‚¹${solarBill}

âœ… Contact me for more info!`;

      const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    }
  </script>

</body>
</html>
